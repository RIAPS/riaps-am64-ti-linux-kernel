#!/usr/bin/make -f

export CROSS_COMPILE="$(CURDIR)/../../../../tools/arm-gnu-toolchain-13.2.Rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-"

srctree ?= .

build-indep:
build-arch:
	$(MAKE) ARCH=arm64 CROSS_COMPILE=$(CROSS_COMPILE) -j4 KERNELRELEASE=6.1.83-k3-rt KBUILD_BUILD_VERSION=1 -f $(srctree)/Makefile defconfig ti_arm64_prune.config ti_rt.config riaps.config
	$(MAKE) ARCH=arm64 CROSS_COMPILE=$(CROSS_COMPILE) -j4 KERNELRELEASE=6.1.83-k3-rt KBUILD_BUILD_VERSION=1 -f $(srctree)/Makefile


build: build-arch

binary-indep:
binary-arch: build-arch
	$(MAKE) ARCH=arm64 CROSS_COMPILE=$(CROSS_COMPILE) -j4 KERNELRELEASE=6.1.83-k3-rt KBUILD_BUILD_VERSION=1 -f $(srctree)/Makefile intdeb-pkg


clean:
	rm -rf debian/files debian/linux-*
	$(MAKE) clean

binary: binary-arch